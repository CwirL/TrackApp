(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{150:function(e,t,a){e.exports=a(292)},291:function(e,t,a){},292:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(48),c=a.n(i),o=a(68),l=a(34),s=a(31),m=a.n(s),d=a(69),u=a(49),p=a(23),h=a(24),v=a(27),g=a(25),f=a(28),b=a(300),y=a(299),E=a(296),w=function(){return"undefined"===typeof window?b.a.onlyTablet.minWidth:window.innerWidth},k={navItem:{padding:"0 20px 5px 20px",fontSize:"16px"},navBrand:{padding:"0 0 5px 0",margin:0,fontSize:"20px"}},I=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(v.a)(this,Object(g.a)(t).call(this,e))).handleItemClick=function(e,t){var n=t.name;return a.setState({activeItem:n})},a.state={activeItem:"RealTime",username:"Wilmer"},a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.state,t=e.activeItem,a=e.username;return r.a.createElement(b.a,{getWidth:w,minWidth:b.a.onlyTablet.minWidth},r.a.createElement(y.a,{inverted:!0},r.a.createElement(E.a,{inverted:!0,pointing:!0,secondary:!0},r.a.createElement(E.a.Item,{as:"h3",style:k.navBrand},"TrackApp"),r.a.createElement(E.a.Menu,{position:"right"},r.a.createElement(E.a.Item,{as:"p",style:k.navItem},"Welcome ",a),r.a.createElement(E.a.Item,{as:"a",style:k.navItem,name:"RealTime",active:"RealTime"===t,onClick:this.handleItemClick},"RealTime"),r.a.createElement(E.a.Item,{as:"a",style:k.navItem,name:"Historical",active:"Historical"===t,onClick:this.handleItemClick},"Historical"),r.a.createElement(E.a.Item,{as:"a",style:k.navItem},"Log out")))))}}]),t}(n.Component),O=a(297),j=a(294),x=a(301),C=function(){return"undefined"===typeof window?b.a.onlyTablet.minWidth:window.innerWidth},T={navItem:{padding:"0 10px 5px 10px",fontSize:"16px"},navItemToggle:{fontSize:"16px",padding:"26px",margin:"auto"},navBrand:{padding:"0 0 5px 0",margin:0,fontSize:"20px"}},S=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(v.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={username:"Wilmer",activeItem:"RealTime"},a.handleItemClick=function(e,t){var n=t.name;return a.setState({activeItem:n})},a.handleSidebarHide=function(){return a.setState({sidebarOpened:!1})},a.handleToggle=function(){return a.setState({sidebarOpened:!0})},a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.state,t=e.sidebarOpened,a=e.username,n=e.activeItem;return r.a.createElement(b.a,{as:O.a.Pushable,getWidth:C,maxWidth:b.a.onlyMobile.maxWidth,style:{overflow:"hidden"}},r.a.createElement(O.a,{as:E.a,animation:"overlay",direction:"bottom",inverted:!0,onHide:this.handleSidebarHide,visible:t,style:{overflow:"hidden"}},r.a.createElement(E.a.Item,{as:"a",style:T.navItemToggle,name:"RealTime",active:"RealTime"===n,onClick:this.handleItemClick},"RealTime"),r.a.createElement(E.a.Item,{as:"a",style:T.navItemToggle,name:"Historical",active:"Historical"===n,onClick:this.handleItemClick},"Historical"),r.a.createElement(E.a.Item,{as:"a",style:T.navItemToggle,name:"Historical",onClick:this.handleItemClick},"Log out")),r.a.createElement(O.a.Pusher,{dimmed:t},r.a.createElement(y.a,{inverted:!0,textAlign:"center",vertical:!0},r.a.createElement(j.a,null,r.a.createElement(E.a,{inverted:!0,pointing:!0,secondary:!0,size:"large"},r.a.createElement(E.a.Item,{style:T.navBrand},"TrackApp"),r.a.createElement(E.a.Menu,{position:"right"},r.a.createElement(E.a.Item,{as:"a",active:!1,style:T.navItem},"Welcome ",a),r.a.createElement(E.a.Item,{style:T.navItem,onClick:this.handleToggle},r.a.createElement(x.a,{name:"sidebar"}))))))))}}]),t}(n.Component),L=function(){return r.a.createElement("div",null,r.a.createElement(I,null),r.a.createElement(S,null))},W=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(v.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).onScriptLoad=function(){var e=new window.google.maps.Map(document.getElementById(a.props.id),a.props.options);a.props.onMapLoad(e)},a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(window.google)this.onScriptLoad();else{var t=document.createElement("script");t.type="text/javascript",t.src="https://maps.google.com/maps/api/js?key=AIzaSyDnZHCNVuYH8lZSMZtuHzJ4677eUi6AE8w";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(t,a),t.addEventListener("load",function(t){e.onScriptLoad()})}}},{key:"render",value:function(){return r.a.createElement("div",{style:{width:"100%",height:"100%"},id:this.props.id})}}]),t}(n.Component),H=function(e){function t(){return Object(p.a)(this,t),Object(v.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(h.a)(t,[{key:"componentDidUpdate",value:function(){var e=this,t=this.props.cars;console.log(t[0],t[1]),t.map(function(t,a){e.markers[a].setPosition(t.records[t.records.length-1]),e.polys[a].setPath(t.records),t.active?(e.markers[a].setVisible(!0),e.polys[a].setVisible(!0)):(e.markers[a].setVisible(!1),e.polys[a].setVisible(!1))})}},{key:"render",value:function(){var e=this,t=this.props.cars,a=t[1].records[t[1].records.length-1];return r.a.createElement(W,{id:"myMap",options:{center:a,zoom:15},onMapLoad:function(a){e.markers=t.map(function(e){return new window.google.maps.Marker({position:e.records[e.records.length-1],map:a})}),e.polys=t.map(function(e){return new window.google.maps.Polyline({path:e.records,map:a})})}})}}]),t}(n.Component),M=a(298),R=a(295);function B(e){var t=this,a=e.cars,n=e.handleChange;return a.map(function(e,a){return r.a.createElement(M.a.Column,{key:e.plate,width:12},r.a.createElement(R.a,{checked:e.active,onChange:n.bind(t,a),label:r.a.createElement("label",{style:{color:"white"}},e.plate)}))})}var z={text:{color:"white"},mapContainer:{height:"500px",padding:"0",margin:"0"}},A=function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(v.a)(this,Object(g.a)(t).call(this))).getUser=Object(u.a)(m.a.mark(function t(){var a,n,r,i,c,o;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={email:"will.canti2697@gmail.com"},n={method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}},t.prev=2,t.next=5,fetch("http://192.168.1.8:5000/track/api/getUser",n);case 5:return r=t.sent,t.next=8,r.json();case 8:i=t.sent,c=[],o=[],i.cars.forEach(function(e){c=[].concat(Object(d.a)(c),[{plate:e.plate,active:!0,records:[]}]),o=[].concat(Object(d.a)(o),[e.plate])}),e.setState({plates:o,cars:c,userLoaded:!0}),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(2),console.log(t.t0);case 18:case"end":return t.stop()}},t,null,[[2,15]])})),e.handleChangeCheckCar=function(t,a){var n=e.state.cars;n[t].active=!n[t].active,e.setState({cars:n})},e.getRecords=Object(u.a)(m.a.mark(function t(){var a,n,r,i,c,o;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state,n=a.cars,r=a.plates,i={email:"will.canti2697@gmail.com",plates:r},c={method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json"}},t.prev=3,t.next=6,fetch("http://192.168.1.8:5000/track/api/lastPosArr",c);case 6:return o=t.sent,t.next=9,o.json();case 9:t.sent.map(function(e,t){n[t].records=[].concat(Object(d.a)(n[t].records),[{lat:e.latitud,lng:e.longitud}])}),e.setState({cars:n,mapLoaded:!0}),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(3),e.setState({mess:"Was not able to connect to the dataBase"}),console.log(t.t0.message);case 18:case"end":return t.stop()}},t,null,[[3,14]])})),e.state={path:[],mess:"Loading",cars:[],plates:[],records:[],userLoaded:!1,mapLoaded:!1},e}return Object(f.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUser();case 2:return e.next=4,this.getRecords();case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=this;this.state.mapLoaded&&(console.log("update after map loaded"),setTimeout(Object(u.a)(m.a.mark(function t(){return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getRecords();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)})),2e3))}},{key:"render",value:function(){console.log("render");var e=this.state,t=e.mapLoaded,a=e.mess,n=e.cars,i=e.userLoaded;return r.a.createElement("div",null,r.a.createElement(L,null),r.a.createElement(M.a,{stackable:!0,columns:2,divided:!0,padded:!0,inverted:!0},r.a.createElement(M.a.Column,{width:4},r.a.createElement(y.a,{color:"black",inverted:!0},i?r.a.createElement(B,{cars:n,handleChange:this.handleChangeCheckCar}):r.a.createElement("div",null,"Loading"))),r.a.createElement(M.a.Column,{width:12},t?r.a.createElement(y.a,{color:"black",inverted:!0,style:z.mapContainer},r.a.createElement(H,{cars:n})):r.a.createElement("div",{style:z.text},a))))}}]),t}(n.Component);function P(){return r.a.createElement("div",null,"Test")}var N=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Not Found"),r.a.createElement(o.b,{to:"/"},"Go to Homepage"))};a(291);var U=function(){return r.a.createElement(o.a,null,r.a.createElement("div",null,r.a.createElement(l.c,null,r.a.createElement(l.a,{path:"/",component:A,exact:!0}),r.a.createElement(l.a,{path:"/test",component:P,exact:!0}),r.a.createElement(l.a,{component:N}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(U,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[150,1,2]]]);
//# sourceMappingURL=main.8f0758ef.chunk.js.map